<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	</head>

	<body>
		<div id="container"></div>

		<script src="js/three.min.js"></script>

		<script src="js/TrackballControls.js"></script>
		<script src="js/OrbitControls.js"></script>
		<script src="js/stats.min.js"></script>

		<script>

			var container, stats;
			var camera, controls, scene, renderer;
			var cross;

			init();
			animate();

			function init() {
				var WIDTH = document.getElementById('list').offsetWidth
				var HEADERHEIGHT = $(document.getElementById('header')).outerHeight(true) //includes margins
				// console.log("header height ", HEADERHEIGHT2, HEADERHEIGHT1)
				var HEIGHT = window.innerHeight - HEADERHEIGHT //fills whole screen height beneath header	



				scene = new THREE.Scene();


				// camera

				var VIEW_ANGLE = 45, ASPECT = WIDTH / HEIGHT, NEAR = 0.1, FAR = 20000;
				camera = new THREE.PerspectiveCamera( VIEW_ANGLE, ASPECT, NEAR, FAR);
				scene.add(camera);
				camera.position.set(0,700,1500);
				camera.lookAt(scene.position);	



				// RENDERER

				renderer = new THREE.WebGLRenderer( { antialias: false } );
				renderer.setSize(WIDTH, HEIGHT);
				container = document.getElementById( 'list' );
				container.appendChild( renderer.domElement );


				// CONTROLS
				controls = new THREE.OrbitControls( camera, renderer.domElement );


				// STATS
				stats = new Stats();
				stats.domElement.style.position = 'absolute';
				stats.domElement.style.bottom = '0px';
				stats.domElement.style.zIndex = 100;
				container.appendChild( stats.domElement );

				// // lights

				// light = new THREE.DirectionalLight( 0xffffff );
				// light.position.set( 1, 1, 1 );
				// scene.add( light );

				// light = new THREE.DirectionalLight( 0xffffff );
				// light.position.set( -1, -1, -1 );
				// scene.add( light );

				// light = new THREE.AmbientLight( 0x222222 );
				// scene.add( light );

				// LIGHT
				var light = new THREE.PointLight(0xffffff);
				light.position.set(100,250,100);
				scene.add(light);
				light = new THREE.AmbientLight( 0x222222 );
				scene.add( light );

				// FLOOR
				var floorTexture = new THREE.ImageUtils.loadTexture( 'images/map.png' );
				floorTexture.wrapS = floorTexture.wrapT = THREE.RepeatWrapping; 
				// floorTexture.repeat.set( 10, 10 );
				var floorMaterial = new THREE.MeshBasicMaterial( { map: floorTexture, side: THREE.DoubleSide } );
				var floorGeometry = new THREE.PlaneGeometry(2000, 1237, 10, 10);
				var floor = new THREE.Mesh(floorGeometry, floorMaterial);
				floor.position.y = -0.5;
				floor.rotation.x = Math.PI / 2;
				scene.add(floor);

				// SKYBOX
				var skyBoxGeometry = new THREE.CubeGeometry( 10000, 10000, 10000 );
				var skyBoxMaterial = new THREE.MeshBasicMaterial( { color: 0x000000, side: THREE.BackSide } );
				var skyBox = new THREE.Mesh( skyBoxGeometry, skyBoxMaterial );
				scene.add(skyBox);
	


				// world


				// var geometry = new THREE.BoxGeometry( 100,100,100); 
				// var material =  new THREE.MeshLambertMaterial( { color: 'blue'} );
				// var cube = new THREE.Mesh( geometry, material );
				// cube.overdraw = true;
				// cube.rotation.x = Math.PI * 0.1;
				// scene.add(cube);				
				// scene.add( cube );


				// var geometry = new THREE.BoxGeometry( 100,height,100); 
				// var material =  new THREE.MeshLambertMaterial( { color: 'red'} );
				// var cube2 = new THREE.Mesh( geometry, material );
				// cube2.position.set(200,tpos,200);	
				// scene.add( cube2 );
	
				// var geometry = new THREE.SphereGeometry( 30, 32, 16 );
				// var material = new THREE.MeshLambertMaterial( { color: 0x000088 } );
				// mesh = new THREE.Mesh( geometry, material );
				// mesh.position.set(0,40,0);
				// scene.add(mesh);

				addBox(100,50,100,0,0,'blue');
				addBox(100,200,100,200,200,'red');

				window.addEventListener( 'resize', onWindowResize, false );

				render();
			}

			function addBox(width, height, depth, xpos, ypos, color){
				// var height = 50
				var tpos = height/2

				var geometry = new THREE.BoxGeometry( width,height,depth); 
				var material =  new THREE.MeshLambertMaterial( { color: color} );
				var cube1 = new THREE.Mesh( geometry, material );
				cube1.position.set(xpos,tpos,ypos);	
				scene.add( cube1 );
			}

			function onWindowResize() {

				camera.aspect = WIDTH / HEIGHT;
				camera.updateProjectionMatrix();
				renderer.setSize( WIDTH, HEIGHT );
				controls.handleResize();
				render();
			}

			function animate() {

			    requestAnimationFrame( animate );
				render();		
				controls.update();
			}

			function render() {

				renderer.render( scene, camera );
				stats.update();
			}


		</script>

	</body>
</html>
